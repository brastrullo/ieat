(this.webpackJsonpieat=this.webpackJsonpieat||[]).push([[0],{1:function(e,t,n){"use strict";n.d(t,"o",(function(){return v})),n.d(t,"p",(function(){return x})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return L})),n.d(t,"j",(function(){return P})),n.d(t,"n",(function(){return N})),n.d(t,"f",(function(){return S})),n.d(t,"i",(function(){return F})),n.d(t,"h",(function(){return I})),n.d(t,"g",(function(){return B})),n.d(t,"l",(function(){return T})),n.d(t,"m",(function(){return R})),n.d(t,"e",(function(){return V})),n.d(t,"k",(function(){return A})),n.d(t,"d",(function(){return J}));var a=n(8),r=n(22),i=n(12),c=n(2),l=n.n(c),s=n(6),u=n(10),o=Object(u.b)({name:"city",initialState:{loading:"idle",simpleList:[],fullList:[],filteredList:[],list:[],citiesList:[],nEntries:25,currentPage:1,totalPages:0,totalEntries:0,value:"",filter:""},reducers:{loading:function(e,t){"idle"===e.loading&&(e.loading="pending")},listReceived:function(e,t){console.log("oldlist",t.payload);var n=t.payload;if("pending"===e.loading)if(e.loading="idle",e.filter.length>0){var a=e.nEntries,r=e.currentPage,i=r*a-a,c=(r-1)*a+a+1,l=n.slice(i,c);console.log({newList:l}),e.list=l}else e.list=n},setCitiesList:function(e,t){e.citiesList=t.payload},clearLists:function(e,t){e.list=[],e.simpleList=[],e.fullList=[]},setTotalPages:function(e,t){e.totalPages=t.payload},setNEntries:function(e,t){e.nEntries=t.payload},setCityVal:function(e,t){e.value=t.payload},setFilterVal:function(e,t){e.filter=t.payload},setSimpleList:function(e,t){e.simpleList+=t.payload},setFullList:function(e,t){e.fullList+=t.payload},setFilteredList:function(e,t){e.filteredList=t.payload},setCurrentPage:function(e,t){console.log(t.payload),e.currentPage=t.payload},setTotalEntries:function(e,t){e.totalEntries=t.payload}}}),p=o.actions,f=p.loading,_=p.setCityVal,d=p.setFilterVal,m=(p.fetchList,p.listReceived),g=p.setCitiesList,y=p.setSimpleList,b=p.setFullList,h=p.setFilteredList,v=(p.filterLists,p.setCurrentPage),E=p.setTotalEntries,O=p.setTotalPages,j=(p.setNEntries,p.clearLists),x=function(e){return function(t){t(f()),t(m(e))}},C=function(){return function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://opentable.herokuapp.com/api/cities",n=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://opentable.herokuapp.com/api/cities"));case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.next=9,n.cities;case 9:return a=e.sent,e.next=12,a;case 12:return e.abrupt("return",e.sent);case 15:e.prev=15,e.t0=e.catch(0),alert(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),e.next=4,n();case 4:a=e.sent,t(g(a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(n){var a,c,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(O(e.totalPages)),a=Object(i.a)(Array(e.totalPages).keys()).map((function(e){return e+1})),c=function(){var t=Object(s.a)(l.a.mark((function t(){var n,i,c,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],i=Object(r.a)(a),t.prev=2,u=l.a.mark((function t(){var a,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.value,"https://opentable.herokuapp.com/api/restaurants",r=function(){var t=Object(s.a)(l.a.mark((function t(){var n,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat("https://opentable.herokuapp.com/api/restaurants","?city=").concat(e.city,";page=").concat(a));case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,t.next=9,r.restaurants;case 9:return i=t.sent,t.next=12,i;case 12:return t.abrupt("return",t.sent);case 15:t.prev=15,t.t0=t.catch(0),alert(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),t.next=5,r();case 5:i=t.sent,n=n.concat(i);case 7:case"end":return t.stop()}}),t)})),i.s();case 5:if((c=i.n()).done){t.next=9;break}return t.delegateYield(u(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),i.e(t.t1);case 14:return t.prev=14,i.f(),t.finish(14);case 17:return t.next=19,n;case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})));return function(){return t.apply(this,arguments)}}(),t.next=5,c();case 5:u=t.sent,n(b(u)),e.filter.length>0&&n(k(u,e));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(n){var r,i,c,u,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(f()),n(_(e.city)),n(d(e.filter)),"https://opentable.herokuapp.com/api/restaurants",r=function(){var t=Object(s.a)(l.a.mark((function t(){var r,i,c,s,u,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat("https://opentable.herokuapp.com/api/restaurants","?city=").concat(e.city,";page=").concat(e.page));case 3:return r=t.sent,t.next=6,r.json();case 6:return i=t.sent,c=i.total_entries,s=i.per_page,u=Math.ceil(c/s),n(O(u)),n(v(i.current_page)),n(E(c)),1===e.page&&n(w(Object(a.a)({},e,{totalPages:u,perPage:s}))),t.next=16,i;case 16:return o=t.sent,t.next=19,o;case 19:return t.abrupt("return",t.sent);case 22:t.prev=22,t.t0=t.catch(0),alert(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(){return t.apply(this,arguments)}}(),t.next=7,r();case 7:i=t.sent,c=i.restaurants,u=c.map((function(e){return{name:e.name,address:e.address,area:e.area}})),console.log({res:i,restaurants:c}),n(y(u)),o=i.total_entries,0===e.filter.length&&(n(j()),n(k(c,Object(a.a)({},e,{perPage:i.per_page,totalEntries:o}))));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e,t){return function(){var n=Object(s.a)(l.a.mark((function n(a){var r,i,c,s,u;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log({obj:t}),r=Array.from(new Set(e.map(JSON.stringify))).map(JSON.parse),i=r.filter((function(e){var n=[e.name,e.address,e.area],a=t.filter.replace(/\s/g," ").toLowerCase();return n.some((function(e){return-1!==e.replace(/\s/g," ").toLowerCase().indexOf(a)}))})),c=t.perPage,s=t.filter.length>0?i.length:t.totalEntries,console.log({totalEntries:s}),u=Math.ceil(s/c),a(O(u)),a(E(s)),a(h(i)),a(m(i));case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},P=function(e){return e.city.loading},N=function(e){return e.city.value},S=function(e){return e.city.filter},F=function(e){return e.city.list},I=function(e){return e.city.fullList},B=function(e){return e.city.filteredList},T=function(e){return e.city.totalEntries},R=function(e){return e.city.totalPages},V=function(e){return e.city.currentPage},A=function(e){return e.city.nEntries},J=function(e){return e.city.citiesList};t.a=o.reducer},17:function(e,t,n){e.exports={lds_default:"loadingImg_lds_default__1EHZU","lds-default":"loadingImg_lds-default__1L6Pd",loading_img:"loadingImg_loading_img__OxxKS"}},20:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(17),c=n.n(i);t.a=function(){return r.a.createElement("div",{className:c.a.loading_img},r.a.createElement("div",{className:c.a.lds_default},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}},23:function(e,t,n){e.exports={lds_ellipsis:"loadingBtn_lds_ellipsis__3FiI1","lds-ellipsis1":"loadingBtn_lds-ellipsis1__10mR-","lds-ellipsis2":"loadingBtn_lds-ellipsis2__3VfzW","lds-ellipsis3":"loadingBtn_lds-ellipsis3__Z-ZOI"}},24:function(e,t,n){e.exports=n(38)},29:function(e,t,n){},3:function(e,t,n){e.exports={ieat:"City_ieat__3LwSV",searching_text:"City_searching_text__1GPRk",searching_city:"City_searching_city__16gbI",search_fields:"City_search_fields__1C3VR",city_label:"City_city_label__38Y80",filter_label:"City_filter_label__uRfOL",city_input:"City_city_input__2Gq1l",filter_input:"City_filter_input__Z4b1x",search_btn:"City_search_btn__2lonH",showing_entries:"City_showing_entries__2L2Qf",pages_list:"City_pages_list__2ZUgP",page_btn:"City_page_btn__YbmDK",current_page_btn:"City_current_page_btn__1kwmU",restaurant_list:"City_restaurant_list__3Oy84",anchor:"City_anchor__3kxJh",item_card:"City_item_card__1TIhY",image_bg:"City_image_bg__2ghLL",image:"City_image__2Lio_",text_bg:"City_text_bg__1i18B",address:"City_address__THvf_",name_bg:"City_name_bg__2G-SB",name:"City_name__oQ0sk",price_list:"City_price_list__37A7m",price_symbol:"City_price_symbol__21fIH",area:"City_area__lisU7",reserve_btn:"City_reserve_btn__3XvU5",return_top:"City_return_top__2Pmlm"}},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),c=n.n(i),l=(n(29),n(12)),s=n(13),u=n(8),o=n(18),p=n(4),f=n(1),_=n(23),d=n.n(_),m=function(){return r.a.createElement("div",{className:d.a.lds_ellipsis},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},g=n(20),y=n(3),b=n.n(y),h=r.a.lazy((function(){return n.e(4).then(n.bind(null,40))}));function v(){var e=Object(p.b)(),t=Object(p.c)(f.g),n=Object(p.c)(f.d),i=Object(p.c)(f.k),c=Object(p.c)(f.e),_=Object(p.c)(f.j),d=Object(p.c)(f.l),y=Object(p.c)(f.m),v=Object(p.c)(f.i),E=(Object(p.c)(f.h),Object(p.c)(f.n)),O=Object(p.c)(f.f),j=Object(a.useState)({city:E,filter:O,page:c}),x=Object(o.a)(j,2),C=x[0],w=x[1],L=Object(a.useState)(E),k=Object(o.a)(L,2),P=k[0],N=k[1];Object(a.useEffect)((function(){e(Object(f.c)())}),[]);var S=function(e){e.preventDefault(),w(Object(u.a)({},C,Object(s.a)({},e.target.id,e.target.value))),"city"===e.target.id&&N(e.target.value)},F=function(e){var t=e.id,a=n.map((function(e,t){return r.a.createElement("option",{key:"c".concat(t),value:e})}));return r.a.createElement("datalist",{id:t},a)},I=function(){var n=y,a=Object(l.a)(Array(n).keys()).filter((function(e){var t=e+1;return 0===e||t<=c+1&&t>=c-1||c<=2&&t<=4||c>=n-1&&t>=n-3||e===n-1})).map((function(a){var i=c===a+1?b.a.current_page_btn:b.a.page_btn;return r.a.createElement("button",{key:"p".concat(a),className:i,onClick:function(){return n=a+1,console.log({n:n}),window.scrollTo(0,0),e(Object(f.o)(n)),void(O.length>0?e(Object(f.p)(t)):e(Object(f.b)(Object(u.a)({},C,{page:n}))));var n}},(a===n-1&&c<n-1?"...":"")+"".concat(a+1)+(a+1===1&&c>3?"...":""))}));return r.a.createElement("ul",{className:b.a.pages_list},a)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"top"}),r.a.createElement("p",{className:b.a.ieat},"iEat"),r.a.createElement("p",{className:b.a.searching_text},r.a.createElement("p",null,"in "),r.a.createElement("span",{className:b.a.searching_city},C.city.length>0?"".concat(C.city,"."):"...")),r.a.createElement("div",{className:b.a.search_fields},r.a.createElement("label",{className:b.a.city_label,htmlFor:"city"},"City"),r.a.createElement("input",{list:"citiesList",className:b.a.city_input,type:"text",id:"city",name:"city",placeholder:"ex. 'Toronto'",required:!0,onChange:S}),r.a.createElement(F,{id:"citiesList"}),r.a.createElement("label",{className:b.a.filter_label,htmlFor:"filter"},"Filter"),r.a.createElement("input",{className:b.a.filter_input,type:"text",id:"filter",name:"filter",placeholder:"ex. 'King St' or 'bar'",required:!0,onChange:S}),r.a.createElement("button",{className:b.a.search_btn,onClick:function(){e(Object(f.b)(C))},disabled:0===P.length||"idle"!==_},"idle"===_?"find":r.a.createElement(m,null))),v&&"idle"===_&&r.a.createElement(r.a.Fragment,null,v.length>=0&&E&&"pending"!==_&&r.a.createElement("p",{className:b.a.showing_entries},"Showing ".concat(c*i-(i-1))+"-".concat((c-1)*i+v.length," ")+"of ".concat(d)),r.a.createElement(a.Suspense,{fallback:r.a.createElement(g.a,null)},r.a.createElement(h,null),r.a.createElement("a",{className:b.a.return_top,href:"#top"},"Return to top"),r.a.createElement(I,{totalPages:y,currentPage:c,totalEntries:d}))))}n(37);var E=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(v,null)),r.a.createElement("footer",null,"by bradley.rastrullo"))},O=n(10),j=Object(O.a)({reducer:{city:f.a},middleware:Object(O.c)({serializableCheck:!1})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,{store:j},r.a.createElement(E,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.35025f4f.chunk.js.map